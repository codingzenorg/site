(function () {document.body.style.margin="0px",document.body.style.borderColor="blue",document.body.style.borderStyle="solid",document.body.style.borderWidth="5px";var c=document.createElement("canvas");c.width=window.innerWidth-10,c.height=window.innerHeight-10,document.body.appendChild(c),window.onload=function(){document.addEventListener("keydown",h),b.calcSize(c),setInterval(g,1e3/15)};var b={cellSize:10,calcSize:function($){this.width=Math.floor($.width/this.cellSize),this.height=Math.floor($.height/this.cellSize)},backcolor:"black"},a={x:10,y:10,trail:[],tail:5,color:"lime"},d={x:15,y:15},f=[0,0],e=c.getContext("2d"),g=function(){a.x+=f[0],a.y+=f[1],a.x<0&&(a.x=b.width-1),a.x>b.width-1&&(a.x=0),a.y<0&&(a.y=b.height-1),a.y>b.height-1&&(a.y=0),e.fillStyle=b.backcolor,e.fillRect(0,0,c.width,c.height),e.fillStyle=a.color;for(var $=0;$<a.trail.length;$++)e.fillRect(a.trail[$].x*b.cellSize,a.trail[$].y*b.cellSize,b.cellSize-2,b.cellSize-2);for(a.trail.push({x:a.x,y:a.y});a.trail.length>a.tail;)a.trail.shift();d.x==a.x&&d.y==a.y&&(a.tail++,d.x=Math.floor(Math.random()*b.width),d.y=Math.floor(Math.random()*b.height)),e.fillStyle="red",e.fillRect(d.x*b.cellSize,d.y*b.cellSize,b.cellSize-2,b.cellSize-2)},h=function($){f=i[$.keyCode]||f,$.preventDefault()},i={37:[-1,0],38:[0,-1],39:[1,0],40:[0,1]};})();